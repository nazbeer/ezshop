{% extends 'emp_base.html' %}

{% block title %}
    Sales Report
{% endblock %}

{% block content %}
<div class="">
    <div class="card">
        

     <div class="card-header">
    <h5 class="mb-0 text-white">Sales Report - Sales By Staff Product &amp; Service</h5>
    </div>   
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-bordered table-striped nowrap" style="width: 100%;" id="ssis">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Employee Details</th>
                       
                        <th>Product Total</th>
                      
                        <th>Service Total</th>
                        <th>Sub Total</th>
                        <th>Discount</th>
                        <th>Total Amount</th>
                        <th>Payment Method</th>
                        <th>Invoice</th>
                        
                        
                    </tr>
                </thead>
                <tbody>
                    {% for sale in sales %}
                    <tr>
                        <td>{{ sale.date }}</td>
                        <td class="text-capitalize">{{ sale.employee.employee_id }} - {{ sale.employee.first_name }} {{ sale.employee.second_name }}</td>
                       
                        <td>{{ sale.itemtotal }}</td>
                        
                        <td>{{ sale.servicetotal }}</td>
                        <td>{{ sale.sub_total }}</td>
                        <td>{{ sale.discount }}</td>
                        <td>{{ sale.total_amount }}</td>
                        <td class="text-capitalize">{{ sale.payment_method }}</td>
                              <td>
                    <a href="{% url 'generate_invoice_pdf' sale.id 'salesbystaffitemservice' %}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
                    </svg></a>

                        </td>
                        
                        
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
</div>
<div class="">
<div class="card mt-2 mb-4">
    
<div class="card-header">
    
<h5 class="mb-0 text-white">Sales Report - Sales By Staff Service</h5>
</div>
<div class="card-body">
<div class="table-responsive">
    <table class="table table-bordered table-striped nowrap"  style="width: 100%;" id="sss">
        <thead class="text-white">
            <tr>
                <th>Date</th>
                <th>Employee Details</th>
                <th>Service</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Discount</th>
                <th>Total Amount</th>
                <th>Payment Method</th>
                <th>Invoice</th>
                
                
            </tr>
        </thead>
        <tbody>
            {% for sales_admin in sales_staff_service %}
            <tr>
                <td>{{ sales_admin.date }}</td>
                <td class="text-capitalize">{{ sales_admin.employee.employee_id }} - {{ sales_admin.employee.first_name }} {{ sales_admin.employee.second_name }}</td>
                
                <td>{{ sales_admin.service.name }}</td>
                <td>{{ sales_admin.quantity }}</td>
                <td>{{ sales_admin.price }}</td>
                
                <td>{{ sales_admin.discount }}</td>
                <td>{{ sales_admin.total_amount }}</td>
                <td class="text-capitalize">{{ sales_admin.payment_method }}</td>
                      <td>
                    <a href="{% url 'generate_invoice_pdf' sales_admin.id 'salebystaffservice' %}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
                    </svg></a>

                        </td>
                
                
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</div>
</div>
<div class="mb-5">
<div class="card mt-2 mb-3">
    
    <div class="card-header">
        
    <h5 class="mb-0 text-white">Sales Report - Sales By Staff Product</h5>
    </div>
    <div class="card-body">
    <div class="table-responsive">
        <table class="table table-bordered table-striped nowrap" style="width: 100%;" id="ssi">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Employee Details</th>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Discount</th>
                    <th>Total Amount</th>
                    <th>Payment Method</th>
                    <th>Invoice</th>
                    
                    
                </tr>
            </thead>
            <tbody>
                {% for sales_item in sales_staff_item %}
                <tr>
                    <td>{{ sales_item.date }}</td>
                    <td class="text-capitalize">{{ sales_item.employee.employee_id }} - {{ sales_item.employee.first_name }} {{ sales_item.employee.second_name }}</td>
                    
                    <td>{{ sales_item.item.name }}</td>
                    <td>{{ sales_item.quantity }}</td>
                    <td>{{ sales_item.price }}</td>
                    
                    <td>{{ sales_item.discount }}</td>
                    <td>{{ sales_item.total_amount }}</td>
                    <td class="text-capitalize">{{ sales_item.payment_method }}</td>
                    
                          <td>
                    <a href="{% url 'generate_invoice_pdf' sales_item.id 'salebystaffitem' %}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
                    </svg></a>

                        </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    </div>
</div>
</div>

<script>
    new DataTable('#ssi', {
              responsive: true,
              dom: 'lBfrtip',
              
              buttons: [
                  {
                      text: 'Print',
                      extend: 'print',
                      exportOptions: {
                          stripHtml: false,
                         
                      }
                  },
                  {
                      text: 'Export PDF',
                      extend: 'pdf',
                      orientation:'landscape',
                      exportOptions: {
                          stripHtml: true,
                         
                      },
            
                  }
              ],
              
          });
          new DataTable('#sss', {
              responsive: true,
              dom: 'lBfrtip',
              
              buttons: [
                  {
                      text: 'Print',
                      extend: 'print',
                      exportOptions: {
                          stripHtml: false,
                         
                      }
                  },
                  {
                      text: 'Export PDF',
                      extend: 'pdf',
                      orientation:'landscape',
                      exportOptions: {
                          stripHtml: true,
                         
                      },
            
                  }
              ],
              
          });
          new DataTable('#ssis', {
              responsive: true,
              dom: 'lBfrtip',
              
              buttons: [
                  {
                      text: 'Print',
                      extend: 'print',
                      exportOptions: {
                          stripHtml: false,
                        
                      }
                  },
                  {
                      text: 'Export PDF',
                      extend: 'pdf',
                      orientation:'landscape',
                      exportOptions: {
                          stripHtml: true,
                         
                      },
            
                  }
              ],
              
          });
   </script>
<script>
    // Store employee_id in local session storage
    localStorage.setItem('employee_id', '{{ request.session.employee_id }}');
  </script>
{% endblock %}